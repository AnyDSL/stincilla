if(DEVICE STREQUAL "cpu")
    set(DUMMY_BACKEND dummy_gpu.impala)
endif()

add_stincilla_test(blur main.cpp "../utils.impala;${DUMMY_BACKEND};schedule.impala;blur.impala")
set_target_properties(blur PROPERTIES COMPILE_FLAGS -DSTINCILLA_DATA_TYPE=int)
add_stincilla_test(harris main.cpp "../utils.impala;${DUMMY_BACKEND};schedule.impala;harris.impala")
set_target_properties(harris PROPERTIES COMPILE_FLAGS -DSTINCILLA_DATA_TYPE=float)
add_stincilla_test(simple main.cpp "../utils.impala;${DUMMY_BACKEND};simple.impala")
set_target_properties(simple PROPERTIES COMPILE_FLAGS -DSTINCILLA_DATA_TYPE=int)
file(COPY ../common/lena.pgm DESTINATION ${CMAKE_CURRENT_BINARY_DIR})
file(COPY ../common/square.pgm DESTINATION ${CMAKE_CURRENT_BINARY_DIR})
